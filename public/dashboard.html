<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard | Pallas CyberSec</title>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.9.1/font/bootstrap-icons.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="/public/css/components/sidebar/sidebar.css" />
    <link rel="stylesheet" href="/public/css/dashboard.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <link rel="stylesheet" href="/public/css/globals.css" />

    <style>
      @import url("https://fonts.googleapis.com/css2?family=Michroma&display=swap");
    </style>
  </head>
  <body class="bg-background">
    <header class="border-bottom py-3 px-4 d-flex align-items-center">
      <!-- Logo -->
      <div class="title">
        <h2 class="michroma-regular mb-0">Pallas</h2>
      </div>
      <!--Sidebar Button-->
      <div class="toggle button">
        <button
          class="btn btn-dark ms-3"
          id="toggleSidebarButton"
          onclick="toggleSidebar()"
        >
          <i class="bi bi-list"></i>
        </button>
      </div>
    </header>

    <div id="collapseSidebar" class="sidebar sidebar">
      <span class="closebtn text-light" onclick="toggleSidebar()">×</span>
      <a href="/" class="nav-item"><i class="bi bi-house"></i> Home</a>
      <a href="#" class="nav-item"
        ><i class="bi bi-columns-gap"></i> Dashboard</a
      >
      <a href="/search" class="nav-item active"
        ><i class="bi bi-fingerprint"></i> Scan</a
      >
      <a href="/integrations" class="nav-item"
        ><i class="bi bi-plus-circle"></i> Integrações</a
      >
      <a href="/reports" class="nav-item"
        ><i class="bi bi-printer-fill"></i> Relatórios</a
      >
      <a href="/logout" class="nav-item"
        ><i class="bi bi-box-arrow-left"></i> Sair</a
      >
    </div>
    <main class="p-4">
      <div class="d-flex justify-content-between mb-4">
        <h2 class="fs-4 fw-bold text-light">Resultados Encontrados</h2>
      </div>

      <div class="row g-3 text-center">
        <div class="col-md-3">
          <div class="card">
            <div class="card-header">
              <span>Tecnologias</span>
            </div>
            <div class="card-body">
              <h2>20</h2>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card">
            <div class="card-header">
              <span>Subdomínios</span>
            </div>
            <div class="card-body">
              <h2>158</h2>
            </div>
            <div class="card-footer">
              <span>Subdomínios</span>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card">
            <div class="card-header">
              <span>vhosts</span>
            </div>
            <div class="card-body">
              <h2>20</h2>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card h-100">
            <div class="card-header">
              <span>IP</span>
            </div>
            <div class="card-body">
              <h2>13</h2>
            </div>
          </div>
        </div>
      </div>
    </main>
    <script>
      const cards_summary_info = [
        {
          Tecnologias: 20,
          Subdomínios: 183,
          vhosts: 20,
          IPs: 13,
        },
      ];

      const colorMap = {
        Tecnologias:
          "linear-gradient(145deg, rgba(204, 208, 80, 1) 0%, rgba(80, 80, 80, 1) 100%)",
        Subdomínios:
          "linear-gradient(135deg, rgba(242, 0, 0, 1) 0%, rgba(50, 0, 0, 1) 90%)",
        vhosts: "linear-gradient(135deg, #9602A3, #252525)",
        IPs: "linear-gradient(135deg, #00C79C, #1E1E1E)",
      };

      const card_summary_link = {
        Tecnologias: "/dashboard/tecnologies",
        Subdomínios: "/dashboard/subdomains",
        vhosts: "/dashboard/vhosts",
        IPs: "/dashboard/ips",
      };

      function createCardsFromJSON(data, links = card_summary_link) {
        const container = document.querySelector(".row.g-3.text-center");
        container.innerHTML = ""; // limpa cards existentes

        const info = data[0];

        for (const [key, value] of Object.entries(info)) {
          const col = document.createElement("div");
          col.className = "col-md-3";

          const card = document.createElement("div");
          card.className =
            "card h-100 text-light border-0 shadow-lg rounded-3 overflow-hidden";
          card.style.background =
            colorMap[key] || "linear-gradient(135deg, #555, #222)";

          const cardHeader = document.createElement("div");
          cardHeader.className =
            "card-header border-0 fw-bold fs-6 text-uppercase d-flex justify-content-between";
          cardHeader.style.background = "#fff";
          cardHeader.style.color = "var(--primary)";

          // Cria o ícone com link
          const iconLink = links[key]
            ? `<a href="${links[key]}" class="text-decoration-none text-primary" title="Ver detalhes"><i class="bi bi-box-arrow-up-right"></i></a>`
            : "";

          cardHeader.innerHTML = `<span>${key}</span>${iconLink}`;

          const cardBody = document.createElement("div");
          cardBody.className =
            "card-body d-flex align-items-center justify-content-center";
          cardBody.innerHTML = `<h2 class="fw-bold mb-0">${value}</h2>`;

          card.appendChild(cardHeader);
          card.appendChild(cardBody);
          col.appendChild(card);
          container.appendChild(col);
        }

        // Animação de entrada
        setTimeout(() => {
          document
            .querySelectorAll(".card")
            .forEach((card) => card.classList.add("show"));
        }, 100);
      }

      createCardsFromJSON(cards_summary_info);
    </script>

    <script src="css/components/sidebar/sidebar.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script type="module" src="js/logout.js"></script>
    <script src="js/chart.js"></script>
  </body>
</html>
